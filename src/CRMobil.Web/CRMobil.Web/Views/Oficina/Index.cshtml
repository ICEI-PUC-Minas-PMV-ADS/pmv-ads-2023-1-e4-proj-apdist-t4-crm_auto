@using CRMobil.Web.Models.Oficina;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@model OficinaViewModel
@{
}

<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/png"
      href="../img/SVG-CRMobil-removebg.png"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="~/css/webpage.css" />
    <link rel="stylesheet" href="~/css/style-default.css" />
    <title>CRMobil - Cadastro de Oficina</title>
  </head>
  <body>
    <input type="hidden" value="@Url.Action("Salvar")" id="urlSalvarTipoDocumento" />

    <!--Cabeçalho-->
    <partial name="/Views/Shared/_LayoutMenu.cshtml" />
    
    <!--Form-->
    <section>
        <partial name="FormOficina.cshtml" />
    </section>

    <tr>
        <td>
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </td>
    </tr>
    
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript" src="~/Scripts/App/Oficina/form.js"></script>

    <script>
        var input = document.querySelector('#cnpj');

        input.addEventListener('input', function () {
            mascaraMutuario(this, cpfCnpj);
        });

        input.addEventListener('blur', function () {
            clearTimeout();
        });

        function mascaraMutuario(o, f) {
            v_obj = o
            v_fun = f
            setTimeout(function () {
                v_obj.value = v_fun(v_obj.value)
            }, 1)
        }

        function cpfCnpj(v) {

            //Remove tudo o que não é dígito
            v = v.replace(/\D/g, "")

            if (v.length <= 11) { //CPF

                //Coloca um ponto entre o terceiro e o quarto dígitos
                v = v.replace(/(\d{3})(\d)/, "$1.$2")

                //Coloca um ponto entre o terceiro e o quarto dígitos
                //de novo (para o segundo bloco de nÃºmeros)
                v = v.replace(/(\d{3})(\d)/, "$1.$2")

                //Coloca um hÃ­fen entre o terceiro e o quarto dígitos
                v = v.replace(/(\d{3})(\d{1,2})$/, "$1-$2")

            } else { //CNPJ

                //Coloca ponto entre o segundo e o terceiro dígitos
                v = v.replace(/^(\d{2})(\d)/, "$1.$2")

                //Coloca ponto entre o quinto e o sexto dígitos
                v = v.replace(/^(\d{2})\.(\d{3})(\d)/, "$1.$2.$3")

                //Coloca uma barra entre o oitavo e o nono dígitos
                v = v.replace(/\.(\d{3})(\d)/, ".$1/$2")

                //Coloca um hÃ­fen depois do bloco de quatro dígitos
                v = v.replace(/(\d{4})(\d)/, "$1-$2")
            }

            return v
        }
    </script>
  </body>
</html>